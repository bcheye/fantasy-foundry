{% extends "base.html" %}
{% block title %}Gameweek Winners{% endblock %}

{% block content %}
<h2>üèÜ Weekly Gameweek Performance</h2>

<form method="get" class="filter-form">
  <label for="gameweek">Gameweek:</label>
  <select name="gameweek" id="gameweek">
    <option value="">All</option>
    {% for gw in range(1, 39) %}
      <option value="{{ gw }}" {% if selected_gameweek == gw|string %}selected{% endif %}>{{ gw }}</option>
    {% endfor %}
  </select>

  <label for="rank">Rank:</label>
  <select name="rank" id="rank">
    <option value="">All</option>
    {% for r in range(1, 6) %}
      <option value="{{ r }}" {% if selected_rank == r|string %}selected{% endif %}>{{ r }}</option>
    {% endfor %}
  </select>

  <button type="submit">Apply</button>
</form>

<table>
  <thead>
    <tr>
      <th>Gameweek</th>
      <th>Entry ID</th>
      <th>Points</th>
      <th>Rank</th>
    </tr>
  </thead>
  <tbody>
    {% for row in records %}
    <tr>
      <td>{{ row["GameweekWinners.gameweek"] }}</td>
      <td>{{ row["GameweekWinners.entryId"] }}</td>
      <td>{{ row["GameweekWinners.points"] }}</td>
      <td>{{ row["GameweekWinners.rank"] }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}